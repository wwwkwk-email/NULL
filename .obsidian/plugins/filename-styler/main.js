/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var P=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var D=Object.prototype.hasOwnProperty;var T=(f,i)=>{for(var e in i)P(f,e,{get:i[e],enumerable:!0})},C=(f,i,e,s)=>{if(i&&typeof i=="object"||typeof i=="function")for(let t of w(i))!D.call(f,t)&&t!==e&&P(f,t,{get:()=>i[t],enumerable:!(s=v(i,t))||s.enumerable});return f};var b=f=>C(P({},"__esModule",{value:!0}),f);var E={};T(E,{default:()=>N});module.exports=b(E);var F=require("obsidian");var m=require("obsidian");var g=require("obsidian");var h={idFormat:"12",moveIdToEnd:!1,idDisplayMode:"hide",showCustomSuffix:!1,customSuffix:" (z)",customColor:"#4b0082",enableCustomColor:!1,onlyEnabledFolders:!1,enabledFolders:[],showCustomPrefix:!1,customPrefix:"[Z] ",showCustomFileIcon:!1,customFileIcon:"\u{1F9E0}"};var u=class extends g.Modal{constructor(e,s,t,a){super(e);this.profileName=s;this.profileData=t;this.plugin=a}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:`Profile: ${this.profileName}`}),this.plugin.settings.activeProfiles.includes(this.profileName)||e.createEl("p",{text:"This profile is currently inactive. Changes will take effect when it's active.",cls:"mod-warning"}),this.createSectionHeading(e,"Filename ID format"),new g.Setting(e).setName("ID format").setDesc("Select the ID format used at the beginning of filenames.").addDropdown(o=>{var l;o.addOption("14","14-digit (yyyyMMddHHmmss)"),o.addOption("12","12-digit (yyMMddHHmmss)"),o.addOption("8","8-digit (yyyyMMdd)"),o.addOption("custom","Custom regex"),o.setValue((l=this.profileData.idFormat)!=null?l:"12"),o.onChange(async d=>{this.profileData.idFormat=d,this.plugin.settings.profiles[this.profileName]=this.profileData,await this.plugin.saveSettings(),this.plugin.refreshAll(),this.onOpen()})}),this.profileData.idFormat==="custom"&&new g.Setting(e).setName("Custom ID regex").setDesc(`Enter a custom regular expression to extract the ID and filename
The custom regex must contain exactly three capturing groups:
  (1) the ID
  (2) an optional separator (e.g. -, _, space)
  (3) the remaining file name
Example: ^(\\d{6})([-_ ]?)(.+)$`).addText(o=>{var l;o.setPlaceholder("e.g. ^(\\d{6})([-_ ]?)(.+)$").setValue((l=this.profileData.customIdRegex)!=null?l:"").onChange(async d=>{this.profileData.customIdRegex=d,this.plugin.settings.profiles[this.profileName]=this.profileData,await this.plugin.saveSettings(),this.plugin.refreshAll()})}),this.createSectionHeading(e,"ID display options"),new g.Setting(e).setName("ID display").setDesc("Control how the ID is shown in the filename").addDropdown(o=>{var l;o.addOption("hide","Hide ID"),o.addOption("show","Show ID at start"),o.addOption("end","Move ID to end"),o.setValue((l=this.profileData.idDisplayMode)!=null?l:"hide"),o.onChange(async d=>{this.profileData.idDisplayMode=d,this.plugin.settings.profiles[this.profileName]=this.profileData,await this.plugin.saveSettings(),this.plugin.refreshAll()})}),this.createSectionHeading(e,"Folder filter"),this.addProfileToggleSetting(e,"Restrict to folders","Only apply formatting in specified folders","onlyEnabledFolders");let t=e.createDiv(),a=()=>{var l;t.empty();let o=(l=this.profileData.enabledFolders)!=null?l:[];o.forEach((d,p)=>{new g.Setting(t).setName(d).addExtraButton(c=>{c.setIcon("x").setTooltip("Remove folder").onClick(async()=>{o.splice(p,1),this.profileData.enabledFolders=o,this.plugin.settings.profiles[this.profileName]=this.profileData,await this.plugin.saveSettings(),this.plugin.refreshAll(),a()})})})};a();let n="";new g.Setting(e).setName("Add folder").setDesc("Add a folder prefix (e.g. 'projects/', 'notes/', or 'inbox'). Files in these folders will be styled.").addText(o=>{o.setPlaceholder("folder or prefix").onChange(l=>{n=l})}).addButton(o=>{o.setButtonText("Add").setCta().onClick(async()=>{var d;if(!n)return;let l=(d=this.profileData.enabledFolders)!=null?d:[];l.includes(n)||(l.push(n),this.profileData.enabledFolders=l,this.plugin.settings.profiles[this.profileName]=this.profileData,await this.plugin.saveSettings(),this.plugin.refreshAll(),a()),n=""})}),this.createSectionHeading(e,"Text color styling"),this.addProfileToggleSetting(e,"Enable custom text color","Turn on/off custom color for this profile","enableCustomColor"),new g.Setting(e).setName("Custom text color").setDesc("Color used when color is enabled").addColorPicker(o=>{o.setValue(this.profileData.customColor||"#4b0082"),o.onChange(async l=>{this.profileData.customColor=l,this.plugin.settings.profiles[this.profileName]=this.profileData,await this.plugin.saveSettings(),this.plugin.refreshAll()})}),this.createSectionHeading(e,"Custom file icon options"),this.addProfileToggleSetting(e,"Show custom file icon","Apply a custom file icon such as \u{1F9E0}.","showCustomFileIcon"),this.addProfileTextSetting(e,"Custom file icon","Enter an emoji (e.g. \u{1F9E0}) or Unicode like \\1F4D6 for \u{1F4D6}.","customFileIcon"),this.createSectionHeading(e,"Prefix and suffix styling"),this.addProfileToggleSetting(e,"Show prefix styling","Add a prefix like '[Z]' at the start of file names.","showCustomPrefix"),this.addProfileTextSetting(e,"Prefix","Text to prepend to file names, e.g. [Z]","customPrefix"),this.addProfileToggleSetting(e,"Show suffix styling","Display a suffix like '(z)' at the end of file names.","showCustomSuffix"),this.addProfileTextSetting(e,"Suffix","Text to append to file names, e.g. (z)","customSuffix"),e.createEl("button",{text:"Close"}).addEventListener("click",()=>this.close())}onClose(){let{contentEl:e}=this;e.empty()}createSectionHeading(e,s,t){let n=e.createDiv("setting-item setting-item-heading").createDiv("setting-item-info");n.createDiv({cls:"setting-item-name",text:s}),t&&n.createDiv({cls:"setting-item-description",text:t})}addProfileToggleSetting(e,s,t,a){new g.Setting(e).setName(s).setDesc(t).addToggle(n=>{var r;n.setValue((r=this.profileData[a])!=null?r:!1),n.onChange(async o=>{this.setProfileDataValue(a,o),Object.assign(this.plugin.settings.profiles[this.profileName],this.profileData),await this.plugin.saveSettings(),this.plugin.refreshAll()})})}setProfileDataValue(e,s){this.profileData[e]=s}addProfileTextSetting(e,s,t,a){new g.Setting(e).setName(s).setDesc(t).addText(n=>{var r;n.setPlaceholder("").setValue((r=this.profileData[a])!=null?r:h[a]).onChange(async o=>{this.setProfileDataValue(a,o),Object.assign(this.plugin.settings.profiles[this.profileName],this.profileData),await this.plugin.saveSettings(),this.plugin.refreshAll()})}).addExtraButton(n=>{n.setIcon("reset").setTooltip("Reset to default").onClick(async()=>{let r=a;this.setProfileDataValue(r,h[r]),Object.assign(this.plugin.settings.profiles[this.profileName],this.profileData),await this.plugin.saveSettings(),this.plugin.refreshAll(),this.onOpen()})})}};var S=class extends m.PluginSettingTab{constructor(e,s){super(e,s);this.newProfileName="";this.plugin=s}display(){let{containerEl:e}=this;e.empty(),e.createEl("p",{text:"Profiles let you define different filename styles that can be toggled as needed. Customize icons, colors, prefixes, and suffixes per profile to style your file list your way."}).classList.add("setting-item-description"),new m.Setting(e).setName("New profile").setDesc("Enter a profile name and add it").addText(t=>{t.setPlaceholder("e.g. Focus Mode").onChange(a=>this.newProfileName=a)}).addExtraButton(t=>{t.setIcon("circle-plus").setTooltip("Add profile").onClick(async()=>{this.newProfileName&&(this.plugin.settings.profiles[this.newProfileName]=this.getCleanSettings(),await this.plugin.saveSettings(),this.newProfileName="",this.display())})}),Object.keys(this.plugin.settings.profiles).forEach(t=>{let a=this.plugin.settings.activeProfiles.includes(t);new m.Setting(e).setName(t).addToggle(n=>n.setValue(a).onChange(async r=>{let o=this.plugin.settings.activeProfiles.indexOf(t);r&&o===-1?this.plugin.settings.activeProfiles.push(t):!r&&o>-1&&this.plugin.settings.activeProfiles.splice(o,1),await this.plugin.saveSettings(),this.plugin.refreshAll(),this.display()})).addExtraButton(n=>{n.setIcon("settings").setTooltip("Show profile details").onClick(()=>{new u(this.app,t,this.plugin.settings.profiles[t],this.plugin).open()})}).addExtraButton(n=>{n.setIcon("x").setTooltip("Remove profile").onClick(async()=>{delete this.plugin.settings.profiles[t],this.plugin.settings.activeProfiles=this.plugin.settings.activeProfiles.filter(r=>r!==t),await this.plugin.saveSettings(),this.display()})})})}getCleanSettings(){return{...h}}};var y=class{migrate(i){let e={...i},s=!1;for(let t in e.profiles){let a=e.profiles[t],{profile:n,changed:r}=this.migrateMoveIdToEnd(a);r&&(console.info(`[FileNameStyler] Migrated profile: ${t}`),e.profiles[t]=n,s=!0)}return{migrated:e,changed:s}}migrateMoveIdToEnd(i){let e=!1;if(i.idDisplayMode===void 0){let s=i.moveIdToEnd===!0?"end":"hide";i={...i,idDisplayMode:s},e=!0}return"moveIdToEnd"in i&&(delete i.moveIdToEnd,e=!0),{profile:i,changed:e}}};var x=class extends F.Plugin{async onload(){console.log("FileName Styler Plugin loaded"),await this.loadSettings(),this.addSettingTab(new S(this.app,this)),this.observer=new MutationObserver(i=>{i.some(e=>e.target instanceof HTMLElement&&e.target.closest(".nav-file-title"))&&setTimeout(()=>this.refreshAll(),50)}),this.refreshAll(),this.observer.observe(document.body,{childList:!0,subtree:!0})}refreshAll(){this.observer&&this.observer.disconnect(),this.restoreOriginalFileTitles(),this.applyStylingToFileNames(),this.observer.observe(document.body,{childList:!0,subtree:!0})}onunload(){console.log("FileName Styler Plugin unloaded"),this.observer.disconnect(),this.restoreOriginalFileTitles()}async loadSettings(){let i=await this.loadData(),e=new y,{migrated:s,changed:t}=e.migrate({profiles:{},activeProfiles:[],...i});this.settings=s,t&&await this.saveSettings()}async saveSettings(){await this.saveData(this.settings)}applyStylingToFileNames(){document.querySelectorAll(".nav-file-title-content").forEach(e=>{var r;let s=e,t=e.closest(".tree-item-self"),a=(t==null?void 0:t.getAttribute("data-path"))||"",n=s.dataset.originalTitle||s.textContent||"";for(let o of this.settings.activeProfiles){let l=this.settings.profiles[o];if(!l||l.onlyEnabledFolders&&!((r=l.enabledFolders)!=null&&r.some(c=>a.startsWith(c))))continue;let d=null;if(l.idFormat==="custom"&&l.customIdRegex)try{d=new RegExp(l.customIdRegex)}catch(c){console.warn(`Invalid custom regex in profile '${o}':`,c);continue}else l.idFormat&&(d=new RegExp(`^(\\d{${l.idFormat}})([-_ ]?)(.+)`));if(!d)continue;let p=n.match(d);if(p){this.applyIdHiding(s,p,n,l),this.applyProfileStyling(s,l);break}}})}applyIdHiding(i,e,s,t){var n;if(i.dataset.originalTitle)return;i.dataset.originalTitle=s;let a=(n=t.idDisplayMode)!=null?n:"hide";a==="hide"?i.textContent=e[3]:a==="show"?i.textContent=`${e[1]}${e[2]}${e[3]}`:a==="end"&&(i.textContent=`${e[3]} ${e[1]}`)}applyProfileStyling(i,e){var s,t;e.showCustomPrefix&&e.customPrefix&&!((s=i.textContent)!=null&&s.startsWith(e.customPrefix))&&(i.textContent=`${e.customPrefix}${i.textContent}`),e.showCustomSuffix&&e.customSuffix&&!((t=i.textContent)!=null&&t.endsWith(e.customSuffix))&&(i.textContent=`${i.textContent}${e.customSuffix}`),e.enableCustomColor&&e.customColor&&(i.style.color=e.customColor),e.showCustomFileIcon&&e.customFileIcon&&i.style.setProperty("--file-icon",`"${e.customFileIcon}"`)}restoreOriginalFileTitles(){document.querySelectorAll(".nav-file-title-content").forEach(e=>{let s=e;s.dataset.originalTitle&&(s.textContent=s.dataset.originalTitle,delete s.dataset.originalTitle),s.style.color="",s.style.removeProperty("--file-icon")})}};var N=x;

/* nosourcemap */